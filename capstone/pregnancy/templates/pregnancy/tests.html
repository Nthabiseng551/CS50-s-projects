{% extends "pregnancy/layout.html" %}

{% block body %}
    <h3>Keep track of tests you have done, not all are compulsory some depends on the individual,Each test you get will vary according to your risk for certain conditions; List of common prenatal tests,</h3>
    <h3 id="tests-done"></h3>
    <div>
        <h4>First Trimester Tests and Screenings</h4>
    {% for test in tests1 %}
    <p>{{ test.test_name }}</p>
    {% if done %}
        <button onclick="testdone()" class = "btn btn-sm btn-outline-primary" type="submit">Done</button>
    {% else %}
        <button onclick="testdone()" class = "btn btn-dark" type="submit">Done</button>
    {% endif %}
    {% endfor %}
    </div>
    <div>
        <h4>Second Trimester Tests and Screenings</h4>
        {% for test in tests2 %}
        <p>{{ test.test_name }}</p>
            <button onclick="testdone()" class = "btn btn-sm btn-outline-primary" type="submit">Done</button>
        {% endfor %}
    </div>
        <div>
            <h4>Third Trimester Tests and Screenings</h4>
            {% for test in tests3 %}
            <p>{{ test.test_name }}</p>
            <button onclick="testdone()" class = "btn btn-sm btn-outline-primary" id="test-done">Done</button>
            {% endfor %}
        </div>
        <script>

            if (!localStorage.getItem('testsdone')) {


                localStorage.setItem('testsdone', 0);
            }
            if (!localStorage.getItem('done')) {

                localStorage.setItem('done', 'False');
                }
                if (!localStorage.getItem('class')) {

                    localStorage.setItem('class', 'btn btn-sm btn-outline-primary');
                    }

            function testdone(){
                const btn = event.target;
                let testsdone = localStorage.getItem('testsdone');
                let done = localStorage.getItem('done');
                let class = localStorage.getItem('class');

                if (btn.className === "btn btn-dark" && done === "True"){
                    testsdone--;
                    done = 'False';
                    document.querySelector('#tests-done').innerText = testsdone;
                    btn.className = "btn btn-sm btn-outline-primary";
                }
                else {
                    testsdone++;
                    done = 'True';
                    document.querySelector('#tests-done').innerText = testsdone;
                    btn.className = "btn btn-dark";
                }
                localStorage.setItem('testsdone', testsdone);
                localStorage.setItem('done', done);
                localStorage.setItem('class', class);
            }

        </script>
{% endblock %}
