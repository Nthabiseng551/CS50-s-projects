{% extends "pregnancy/layout.html" %}

{% block body %}
    <h3>Keep track of tests you have done, not all are compulsory some depends on the individual,Each test you get will vary according to your risk for certain conditions; List of common prenatal tests,</h3>
    <h3 id="tests-done"></h3>
    <div class="container">
        <h4>First Trimester Tests and Screenings</h4>
        <div class="list-group">
    {% for test in tests1 %}
    <a href="#" class="list-group-item list-group-item-action flex-column align-items-start active">
        <div class="d-flex w-100 justify-content-between">
          <h5 class="mb-1">{{ test.test_name }}</h5>
          <small>3 days ago</small>
        </div>
        <p class="mb-1">{{ test.description }}</p>
        <button onclick="testdone()" class="btn">Done</button>
      </a>
    {% endfor %}
    </div>
    </div>

    <div class="container">
        <h4>Second Trimester Tests and Screenings</h4>
        {% for test in tests2 %}
        <p>{{ test.test_name }}</p>
            <button onclick="testdone()" class = "btn">Done</button>
        {% endfor %}
    </div>
        <div class="container">
            <h4>Third Trimester Tests and Screenings</h4>
            {% for test in tests3 %}
            <p>{{ test.test_name }}</p>
            <button onclick="testdone()" class = "btn">Done</button>
            {% endfor %}
        </div>
        <script>

            if (!localStorage.getItem('testsdone')) {
                    localStorage.setItem('testsdone', 0);
                    }
            function testdone(){

                const btn = event.target;
                let testsdone = localStorage.getItem('testsdone');

                if (btn.innerHTML === "Done"){
                    testsdone++;
                    localStorage.setItem('testsdone', testsdone);
                    document.querySelector('#tests-done').innerHTML = `${localStorage.getItem('testsdone')} of 14 tests done`;
                    btn.innerHTML = "notDone";

                }
                else if (btn.innerHTML === "notDone"){
                    testsdone--;
                    localStorage.setItem('testsdone', testsdone);
                    document.querySelector('#tests-done').innerHTML = `${localStorage.getItem('testsdone')} of 14 tests done`;
                    btn.innerHTML = "Done";
                }
            }
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelector('#tests-done').innerHTML = `${localStorage.getItem('testsdone')} of 14 tests done`;
            localStorage.clear();
    });
        </script>
{% endblock %}
